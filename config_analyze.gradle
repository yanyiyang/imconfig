import groovy.json.JsonSlurper

def im_friend_display_follow = true;

def inputFile = new File(new File("app").absolutePath, "assets/app_factory/zh-CN/components/build.json")
if(!inputFile.exists()){
    inputFile = new File(new File("app").absolutePath, "assets/app_factory/en/components/build.json")
}
if(!inputFile.exists()){
    inputFile = new File(new File("app/src/main").absolutePath, "assets/app_factory/en/components/build.json")
}
if(!inputFile.exists()){
    inputFile = new File(new File("app/src/main").absolutePath, "assets/app_factory/zh-CN/components/build.json")
}
def list = new JsonSlurper().parse(inputFile)
list.each {
    if (it.component.namespace == 'com.nd.social'
            && it.component.name == 'im') {
        im_friend_display_follow = it.properties.im_friend_display_follow
    }
}

dependencies {
    if (im_friend_display_follow != "true") {
        compile('com.nd.sdp.android:im-friend-res:0.0.3')
        configurations {
            all*.exclude group: 'com.nd.sdp.android' , module: 'im-follow-res'
		}
    }
}